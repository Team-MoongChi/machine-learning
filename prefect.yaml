deployments:
  - name: group-board-flow
    entrypoint: flows/group_board_flow.py:group_board_flow   # 함수명이 이게 맞다면!
    work_pool:
      name: default-work-pool

    steps:
      - prefect.deployments.steps.git_clone:
          repository: https://github.com/Team-MoongChi/machine-learning.git
          branch: feat/prefect-flows
    infra_overrides:
      env:
        OPENSEARCH_HOST: "{{ prefect.blocks.secret.opensearch-host }}"
        OPENSEARCH_PORT: "{{  prefect.blocks.secret.opensearch-port }}"
        OPENSEARCH_USERNAME: "{{  prefect.blocks.secret.opensearch-username }}"
        OPENSEARCH_PASSWORD: "{{  prefect.blocks.secret.opensearch-password }}"
        AWS_ACCESS_KEY_ID: "{{  prefect.blocks.secret.aws-access-key-id }}"
        AWS_SECRET_ACCESS_KEY: "{{  prefect.blocks.secret.aws-secret-access-key }}"
        MYSQL_URL: "{{  prefect.blocks.secret.mysql-url }}"
        MYSQL_PORT: "{{  prefect.blocks.secret.mysql-port }}"
        MYSQL_DATABASE: "{{  prefect.blocks.secret.mysql-database }}"
        MYSQL_USERNAME: "{{  prefect.blocks.secret.mysql-username }}"
        MYSQL_PASSWORD: "{{  prefect.blocks.secret.mysql-password }}"
    requirements: requirements.txt